<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            margin: 0px;
            padding: 0px;
        }
    </style>
</head>
<body onload="draw()">
<canvas id="myCanvas" width="600" height="400"></canvas>

<script type="text/javascript">
    function keys(e){"use strict";return e=e||event,"keydown"===e.type?87===e.which||38===e.which||32===e.which?"up":"":void 0}function restore_listner(){"use strict";window.addEventListener("keydown",function(){direction=keys()})}function init(){"use strict";hero1.src="images/hero1.png",hero2.src="images/hero2.png",hero3.src="images/hero3.png",hero4.src="images/hero4.png",hero5.src="images/hero5.png",hero6.src="images/hero6.png",hero7.src="images/hero7.png",hero8.src="images/hero8.png",cloud.src="images/cloud.png",pie.src="images/pie.png",ground.src="images/ground.png",sky.src="images/sky.png",hero1.height=50,hero1.width=35,restore_listner()}function reset_game(){"use strict";pie_arr=[],pie_count=0,hero_frame=0,screen_points=0,run_count=0,speed=5,hero_speed=5}function heroAnimation(){"use strict";var e,r=25;e=canvas.height-hero1.height-25,hero_frame+=4,hero_frame>16*hero_speed&&(hero_frame=1),hero_frame>=1&&2*hero_speed>hero_frame?(ctx.drawImage(hero1,r,e),ctx.restore()):hero_frame>=2*hero_speed&&4*hero_speed>hero_frame?(ctx.drawImage(hero2,r,e),ctx.restore()):hero_frame>=4*hero_speed&&6*hero_speed>hero_frame?(ctx.drawImage(hero3,r,e),ctx.restore()):hero_frame>=6*hero_speed&&8*hero_speed>hero_frame?(ctx.drawImage(hero4,r,e),ctx.restore()):hero_frame>=8*hero_speed&&10*hero_speed>hero_frame?(ctx.drawImage(hero5,r,e),ctx.restore()):hero_frame>=10*hero_speed&&12*hero_speed>hero_frame?(ctx.drawImage(hero6,r,e),ctx.restore()):hero_frame>=12*hero_speed&&14*hero_speed>hero_frame?(ctx.drawImage(hero7,r,e),ctx.restore()):hero_frame>=14*hero_speed&&(ctx.drawImage(hero8,r,e),ctx.restore())}function hero_actions(e){"use strict";var r,o=25;r=canvas.height-hero1.height-25,hero_frame+=4,"up"===direction?(e.save(),g>=0&&12>=g&&0===m?(g++,e.translate(0,-g*hero_speed),e.drawImage(hero1,o,r),e.restore(),g>=12&&(m=1)):1===m&&12>=g&&g>0?(g--,e.translate(0,-g*hero_speed),e.drawImage(hero1,o,r),e.restore()):1===m&&1>g&&(m=0,g=0,direction="",e.drawImage(hero1,o,r),e.restore()),0===speed&&reset_game()):heroAnimation()}function ground_move(e){"use strict";run_count-=speed,e.fillStyle=e.createPattern(ground,"repeat-x"),e.translate(run_count,canvas.height-ground.height),e.fillRect(0,0,1e3*canvas.width,50),e.restore()}function sky_draw(e){"use strict";e.save(),e.drawImage(sky,0,0),e.restore()}function isNumber(e){"use strict";return!isNaN(parseFloat(e))&&isFinite(e)}function pie_position_calc(e){"use strict";return pie_arr[e]=isNumber(pie_arr[e])?pie_arr[e]-speed:0,pie_arr[e]}function cloud_position_calc(e){"use strict";return isNumber(cloud_arr[e])?cloud_arr[e]=cloud_arr[e]-speed/6:(cloud_arr[e]=0,random_cloudY[e]=Math.floor(200*Math.random()+1),random_cloud_size[e]=Math.floor(50*Math.random()+1)),cloud_arr[e]}function random_pie(){"use strict";var e;e=isNumber(pie_arr[pie_arr.length-1])===!1?1:pie_arr[pie_arr.length-1]<-150?1:0,1===Math.floor(2*Math.random()+1)&&1===Math.floor(10*Math.random()+1)&&1===e&&pie_count++}function random_cloud(e){"use strict";var r,o=Math.floor(150*Math.random()+1);for(1===o&&cloud_countX++,r=0;cloud_countX>r;r++)e.save(),e.translate(cloud_position_calc(r),0),e.drawImage(cloud,0,0,50,50,canvas.width+cloud.width+50,random_cloudY[r],random_cloud_size[r],random_cloud_size[r]),e.restore()}function impact_detection(e){"use strict";var r=-550;r>e&&e>r-pie.width&&5>g&&(speed=0,hero_speed=0)}function pie_draw(e){"use strict";var r;for(r=0;pie_count>r;r++)e.save(),e.translate(pie_position_calc(r),0),0!==speed&&e.drawImage(pie,canvas.width,350),e.restore(),impact_detection(pie_arr[r])}function writeMessage(e,r){"use strict";e.font="10pt Calibri",e.fillStyle="black",e.fillText(r,5,12)}function speed_conrol(e){"use strict";e>incriment&&(speed+=incriment/500,incriment+=incriment)}function points_count(e){"use strict";return Math.round(-1*e/100)}function draw(){"use strict";screen_points=points_count(run_count),speed_conrol(screen_points),ctx.clearRect(0,0,canvas.width,canvas.height),ctx.save(),sky_draw(ctx),random_cloud(ctx),ground_move(ctx),hero_actions(ctx,g),random_pie(),pie_draw(ctx),writeMessage(ctx,"Points: "+screen_points),window.requestAnimationFrame(draw)}var canvas=document.getElementById("myCanvas"),ctx=canvas.getContext("2d"),hero1=new Image,hero2=new Image,hero3=new Image,hero4=new Image,hero5=new Image,hero6=new Image,hero7=new Image,hero8=new Image,ground=new Image,sky=new Image,pie=new Image,cloud=new Image,direction,speed=5,hero_speed=5,g=0,m=0,hero_frame=1,run_count=0,cloud_arr=[],cloud_countX=0,random_cloudY=[],random_cloud_size=[],pie_arr=[],pie_count=0,incriment=500,screen_points=0;init();
</script>
</body>
</html>